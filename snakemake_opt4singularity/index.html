<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="CCRSFIFX" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Snakemake options for containerization - SF_biocontainer Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Snakemake options for containerization";
        var mkdocs_page_input_path = "snakemake_opt4singularity.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> SF_biocontainer Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Intronduction</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="..">Containerization</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../docker/">Create image/container</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Containerization for Snakemake pipeline</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../pipeline_containerization/">Build Snakemake pipeline with Singularity</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Snakemake options for containerization</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../dev_w_docker/">Develop R scripts in the container</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../exec_cmd_sif/">Run command lines using the container outside snakemake pipeline using Singularity</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">FAQ</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../general-questions/">General Questions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../troubleshooting/">Troubleshooting</a>
                  </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../ref/">Reference</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../license/">License</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">SF_biocontainer Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Containerization for Snakemake pipeline</li>
      <li class="breadcrumb-item active">Snakemake options for containerization</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/CCRSF-IFX/SF_biocontainer/edit/main/docs/snakemake_opt4singularity.md">Edit on CCRSF-IFX/SF_biocontainer</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <p>The configuration of snakemake command for singularity is recommended to be set up in <code>profile/slurm/config.v8+.yaml</code>: </p>
<pre><code>use-singularity: True
singularity-args: ' &quot;--cleanenv --no-home -B /scratch/ccrsf_scratch -B /mnt/ccrsf-static -B /mnt/ccrsf-ifx -B /mnt/ccrsf-raw -B /mnt/ccrsf-active&quot; '
</code></pre>
<p>The option <code>-B</code> is used to bind the corresponding storage space into the container so that the files from scratch/Qumulo can be accessible from inside the container.  </p>
<p><code>--no-home</code>: no host <code>$HOME</code> directory mounting. </p>
<blockquote>
<p>Auto-binding feature: By default, Singularity automatically binds several directories (e.g.: <code>$HOME</code>, <code>$PWD</code>) and in particular it binds the home folder of the host. This features simplifies the usage of Singularity for the users, however it can also lead to unexpected behaviours and frustration. For example, if you have different python packages installed in your host home directory and in the container the host packages maybe used instead f the container ones. To avoid this issue, <code>--no-home</code> is used. </p>
</blockquote>
<p>The <code>--cleanenv</code> option is used to exclude passing EBV variables frin the host into the container.</p>
<p>Similar to <code>--no-home</code>, <code>--cleanenv</code> is used to disable Singularity passing host environment variables (<code>$PATH</code>, <code>$LD_LIBRARY_PATH</code>, etc) to the container.  </p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../pipeline_containerization/" class="btn btn-neutral float-left" title="Build Snakemake pipeline with Singularity"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../dev_w_docker/" class="btn btn-neutral float-right" title="Develop R scripts in the container">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
      <p>Copyright &copy; 2024 CCRSFIFX</p>
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/CCRSF-IFX/SF_biocontainer.git" class="fa fa-code-fork" style="color: #fcfcfc"> CCRSF-IFX/SF_biocontainer</a>
        </span>
    
    
      <span><a href="../pipeline_containerization/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../dev_w_docker/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
